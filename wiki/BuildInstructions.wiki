#summary How to build i-jetty
#labels Featured

=Building i-jetty=
_Updated for i-jetty-2.1_

==From the Command Line==
Building i-jetty at the command line is very straightforward.

You'll need these tools:

 * svn
 * [http://java.sun.com/javase/ java jdk] - 1.5 or above
 * [http://maven.apache.org/ maven] - 2.0.8 or above
 * [http://developer.android.com/sdk/index.html android sdk] installation - r05 or above

To build:

 # Checkout the code from svn:  `svn co http://i-jetty.googlecode.com/svn/trunk/`
 # Edit your maven [http://maven.apache.org/settings.html settings.xml] file

You should add the following lines to your [http://maven.apache.org/settings.html settings.xml] file, replacing the value of *android.home* with the location of your android sdk:

{{{
<settings>
  <profiles>
    <profile>
      <id>android</id>
      <properties>
        <android.home>/usr/local/java/android-sdk-linux_r05-linux_86</android.home>
      </properties>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>android</activeProfile>
  </activeProfiles>
</settings>
}}}

Then, assuming you checked out the code to $I_JETTY_HOME, and you have the android sdk installed at $ANDROID_HOME, you do:

{{{
 cd $I_JETTY_HOME
 mvn clean install
}}}

Voila! You will have an installable .apk bundle in your `$I_JETTY_HOME/modules/i-jetty/target` directory. Now follow the instructions over at the [http://developer.android.com/ Android Developers] site to upload it to your phone or emulator.

===Making an SDCard Image===
i-jetty requires an sd card. If you're running with the emulator, you'll need to use the [http://developer.android.com/guide/developing/tools/othertools.html#mksdcard mksdcard] utility from the [http://developer.android.com/ android sdk]. Here's an example of creating a file called "sdcard.img" which is a card with 60Mb storage:

{{{
mksdcard 60M ./sdcard.img
}}}

Remember you need to start the emulator with the scard option:
{{{
emulator -sdcard ./sdcard.img
}}}



==Using the Eclipse Plugin==

You can import the i-jetty project into Eclipse. We use the wonderful [http://m2eclipse.codehaus.org/ m2 Eclipse plugin] to make it easy. 

Note: due to some massaging of the i-jetty-server component to comply with the Dalvik JVM running on Android, we advise that you do not have that project open in eclipse, as the [http://developer.android.com/sdk/eclipse-adt.html Eclipse Android Plugin] cannot properly do what's needed to get it working on Android.  The Maven build is what creates the proper i-jetty-server component that i-jetty-ui (and Android) eventually use.

Please contact the i-jetty developers at *dev@jetty.codehaus.org* for help.