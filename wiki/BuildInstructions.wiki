#summary How to build i-jetty
#labels Featured

=Building i-jetty=
_Updated for i-jetty-2.1_

==From the Command Line==
Building i-jetty at the command line is very straightforward.

You'll need these tools:

 * svn
 * java 1.5 or above
 * maven 2.0.8 or above
 * android sdk installation

To build:

 # Checkout the code from svn:  `svn co http://i-jetty.googlecode.com/svn/trunk/`
 # Edit your maven [http://maven.apache.org/settings.html settings.xml] file

You should add the following lines to your [http://maven.apache.org/settings.html settings.xml] file, replacing the value of *android.home* with the location of your android sdk:

{{{
<settings>
  <profiles>
    <profile>
      <id>android</id>
      <properties>
        <android.home>/usr/local/java/android-sdk-linux_x86-1.6_r1</android.home>
      </properties>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>android</activeProfile>
  </activeProfiles>
</settings>
}}}

Then, assuming you checked out the code to $I_JETTY_HOME, and you have the android sdk installed at $ANDROID_HOME, you do:

{{{
 cd $I_JETTY_HOME
 mvn clean install
}}}

Voila! You will have an installable .apk bundle in your `$I_JETTY_HOME/modules/i-jetty/target` directory. Now follow the instructions over at the [http://developer.android.com/ Android Developers] site to upload it to your phone or emulator.

===Making an SDCard Image===
i-jetty requires an sd card. If you're running with the emulator, you'll need to use the [http://developer.android.com/guide/developing/tools/othertools.html#mksdcard mksdcard] utility from the [http://developer.android.com/ android sdk]. Here's an example of creating a file called "sdcard.img" which is a card with 60Mb storage: `mksdcard 60M ./sdcard.img`.  Remember you need to start the emulator with the scard option: `emulator -sdcard ./sdcard.img`.



==Using the Eclipse Plugin==

You can import the i-jetty project into Eclipse. We use the wonderful [http://m2eclipse.codehaus.org/ m2 Eclipse plugin] to make it easy. 

A word of warning though, we haven't been using the android Eclipse plugin since the early days of i-jetty. We prefer to develop by keeping the emulator running from the command line and then using the `adb uninstall/install` commands to upload new build bundles. If you've had success getting the Eclipse plugin to work with i-jetty then please post *dev@jetty.codehaus.org* with the instructions and we'll update this page.